var SolanaToken=function(t){"use strict";const e="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",n="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",o="Token program",r=function(t,e,n,o,r=[],i=SolanaToken.TOKEN_PROGRAM_ID){const a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:r.length===0,isWritable:!1}];return r.forEach(t=>{a.push({pubkey:t.publicKey,isSigner:!0,isWritable:!1})}),new solanaWeb3.TransactionInstruction({keys:a,programId:i,data:Buffer.from([3,...new Array(8).fill(0)])})},i=async function(t,e,o,r=solanaWeb3.PublicKey.default){try{const i=await SolanaToken.getAssociatedTokenAddress(o,e,!1,SolanaToken.TOKEN_PROGRAM_ID,SolanaToken.ASSOCIATED_TOKEN_PROGRAM_ID);return new solanaWeb3.TransactionInstruction({keys:[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:solanaWeb3.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:SolanaToken.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:SolanaToken.ASSOCIATED_TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:SolanaToken.ASSOCIATED_TOKEN_PROGRAM_ID,data:Buffer.from([])})}catch(t){console.error("创建关联令牌账户指令失败:",t);throw t}},a=async function(t,e,n=!1,o=SolanaToken.TOKEN_PROGRAM_ID,r=SolanaToken.ASSOCIATED_TOKEN_PROGRAM_ID){if(!solanaWeb3||!solanaWeb3.PublicKey)throw new Error("solanaWeb3 library not loaded");try{const i=await s(t.toString(),e.toString(),n,o.toString(),r.toString()),a=new solanaWeb3.PublicKey(i);return a}catch(t){console.error("获取关联令牌地址失败:",t);throw t}},s=async function(t,e,n=!1,o=SolanaToken.TOKEN_PROGRAM_ID.toString(),r=SolanaToken.ASSOCIATED_TOKEN_PROGRAM_ID.toString()){try{const i=new solanaWeb3.PublicKey(t),a=new solanaWeb3.PublicKey(e),s=new solanaWeb3.PublicKey(o),l=new solanaWeb3.PublicKey(r),{publicKey:u}=await solanaWeb3.PublicKey.findProgramAddress([i.toBuffer(),s.toBuffer(),a.toBuffer()],l);return u.toString()}catch(t){console.error("查找程序地址失败:",t);throw t}};return t.ASSOCIATED_TOKEN_PROGRAM_ID=new solanaWeb3.PublicKey(n),t.TOKEN_PROGRAM_ID=new solanaWeb3.PublicKey(e),t.TokenProgram=o,t.createAssociatedTokenAccountInstruction=i,t.createTransferInstruction=r,t.getAssociatedTokenAddress=a,t.internal={deriveAssociatedTokenAddress:s},t}({});
// SPL Token library initialized and globally available as SolanaToken

// 兼容性处理
if (typeof window !== 'undefined') {
  window.SolanaToken = SolanaToken;
  if (!window.spl) window.spl = {};
  window.spl.token = SolanaToken;
  console.log('SPL Token库已成功加载');
} 