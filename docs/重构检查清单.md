# 重构检查清单

## 🔍 重构触发条件
- [ ] 文件超过300行
- [ ] 重复代码超过3处
- [ ] 导入超过20个
- [ ] 函数超过50行

## 📋 重构步骤

### 准备阶段
- [ ] 备份原文件
- [ ] 分析功能模块
- [ ] 设计新架构

### 实施阶段
- [ ] 创建目录结构
- [ ] 实现基础框架
- [ ] 提取工具函数
- [ ] 统一装饰器
- [ ] 拆分功能模块
- [ ] 更新路由注册

### 验证阶段
- [ ] 本地编译测试
- [ ] 功能完整性测试
- [ ] 部署测试
- [ ] 性能监控

## ✅ 代码质量检查

### 文件检查
- [ ] 单文件<500行
- [ ] 无重复函数
- [ ] 导入语句有序
- [ ] 注释完整

### 功能检查
- [ ] 所有API正常
- [ ] 页面访问正常
- [ ] 数据库操作正常
- [ ] 错误处理完善

### 部署检查
- [ ] 应用启动正常
- [ ] 无路由冲突
- [ ] 内存使用正常
- [ ] 日志无错误

## 🛠️ 常用命令

```bash
# 检查文件行数
find . -name "*.py" -exec wc -l {} + | sort -n

# 检查重复函数
grep -r "def function_name" --include="*.py"

# Git提交
git add .
git commit -m "重构: 模块化admin系统"
git push origin main

# 服务器部署
git pull origin main
pm2 restart all
pm2 status
``` 